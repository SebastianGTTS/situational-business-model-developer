<form [formGroup]="executionStepsSelectionForm" (ngSubmit)="submitForm()">
  <ul *ngIf="formArray.controls.length > 0" class="list-group mb-3">
    <li
      *ngFor="let control of formArray.controls; let index = index"
      class="list-group-item"
    >
      <h5>Step #{{ index + 1 }}</h5>
      <app-development-method-select-execution-step
        [executionStepsFormValue]="formArray.value"
        [formGroup]="$any(control)"
        [developmentMethod]="developmentMethod"
        [stepNumber]="index"
        (remove)="removeStep(index)"
      ></app-development-method-select-execution-step>
    </li>
  </ul>
  <div class="d-flex mb-3">
    <button type="button" class="btn btn-primary ml-auto" (click)="addStep()">
      Add execution step
    </button>
  </div>
  <div class="form-group row">
    <div class="col-sm-12">
      <button
        type="submit"
        class="btn btn-sm btn-block"
        [class.btn-dark]="!changed"
        [class.btn-primary]="changed"
        [disabled]="!executionStepsSelectionForm.valid"
      >
        Update<span *ngIf="changed"> (unsaved changes)</span>
      </button>
    </div>
  </div>
</form>
