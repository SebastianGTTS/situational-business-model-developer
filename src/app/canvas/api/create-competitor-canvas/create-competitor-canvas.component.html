<div class="nav-scroller bg-white shadow-sm">
  <nav class="nav nav-underline" *ngIf="processApiService.runningProcess">
    <a
      class="nav-link"
      [routerLink]="[
        '/',
        'runningprocess',
        'runningprocessview',
        processApiService.runningProcess._id
      ]"
    >
      {{ processApiService.runningProcess.process.name }} &ndash;
      {{ processApiService.runningProcess.name }}
    </a>
    <a
      class="nav-link"
      [routerLink]="[
        '/',
        'runningprocess',
        'runningprocessview',
        processApiService.runningProcess._id,
        'method',
        processApiService.runningMethod.executionId
      ]"
    >
      {{ processApiService.runningMethod.methodName }}
    </a>
    <a
      class="nav-link active"
      [routerLink]="[]"
      [queryParams]="processApiService.queryParams"
    >
      Create Competitor Canvas
    </a>
  </nav>
</div>

<app-step-errors></app-step-errors>

<main
  *ngIf="
    processApiService.runningMethod != null && processApiService.isCorrectStep()
  "
  role="main"
  class="container"
>
  <div class="my-3 p-3 bg-white rounded shadow-sm">
    <h6 class="border-bottom border-gray pb-2 mb-0">Create Competitors</h6>
    <div class="text-muted pt-3">
      <form [formGroup]="form" (ngSubmit)="submit()">
        <ul class="list-group mb-3" formArrayName="competitors">
          <li
            *ngFor="let control of formArray.controls; let index = index"
            class="list-group-item"
          >
            <app-feature-model-instance-subform
              [formGroupName]="index.toString()"
            ></app-feature-model-instance-subform>
            <div class="d-flex">
              <button
                type="button"
                class="btn btn-dark ml-auto"
                (click)="removeCompetitor(index)"
              >
                Remove
              </button>
            </div>
          </li>
        </ul>
        <div class="d-flex">
          <button
            type="button"
            class="btn btn-primary ml-auto mb-3"
            (click)="addCompetitor()"
          >
            Add Competitor
          </button>
        </div>
        <div class="form-group row">
          <div class="col-sm-12">
            <button
              type="submit"
              class="btn btn-sm btn-dark btn-block"
              [disabled]="!form.valid"
            >
              Create Competitors
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</main>
