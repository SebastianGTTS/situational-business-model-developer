<form [formGroup]="domainsForm" (ngSubmit)="submitForm()">
  <div class="mb-3" formArrayName="domains">
    <app-domain-selection-form
      *ngFor="let control of domainsFormArray.controls; let index = index"
      [formGroupName]="index.toString()"
      [domainDefinitions]="domainDefinitions"
      [index]="index"
      (remove)="remove(index)"
    ></app-domain-selection-form>
  </div>
  <div class="d-flex mb-3">
    <button
      id="domains-selection-form-add"
      (click)="add()"
      type="button"
      class="btn btn-secondary ms-auto"
    >
      Add Domain
    </button>
  </div>
  <div class="d-grid">
    <button
      id="domains-selection-form-update"
      type="submit"
      class="btn btn-sm"
      [class.btn-dark]="!changed"
      [class.btn-primary]="changed"
      [disabled]="!domainsForm.valid"
    >
      Update<span *ngIf="changed"> (unsaved changes)</span>
    </button>
  </div>
</form>
