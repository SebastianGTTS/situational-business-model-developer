<form [formGroup]="domainsForm" (ngSubmit)="submitForm()">
  <div class="form-group" formArrayName="domains">
    <app-domain-selection-form
      *ngFor="let control of domainsFormArray.controls; let index = index"
      [formGroupName]="index.toString()"
      [domainDefinitions]="domainDefinitions"
      [index]="index"
      (remove)="remove(index)"
    ></app-domain-selection-form>
  </div>
  <div class="form-group d-flex">
    <button (click)="add()" type="button" class="btn btn-secondary ml-auto">
      Add Domain
    </button>
  </div>
  <div class="form-group row">
    <div class="col-sm-12">
      <button
        type="submit"
        class="btn btn-sm btn-block"
        [class.btn-dark]="!changed"
        [class.btn-primary]="changed"
        [disabled]="!domainsForm.valid"
      >
        Update<span *ngIf="changed"> (unsaved changes)</span>
      </button>
    </div>
  </div>
</form>
